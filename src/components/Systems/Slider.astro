---
import "@splidejs/splide/css/core";
import Image from "@/components/Systems/Image.astro";
---

<div class="relative">
  <div>
    <Image
      image="/src/assets/images/sp/sp05.jpg"
      sources={[
        {
          src: "/src/assets/images/pc/05.jpg",
          breakpoint: 768,
        },
      ]}
    />
  </div>
  <div class="absolute left-1/2 top-[45%] w-[95%] translate-x-[-50%] md:top-[33%]">
    <section id="thumbnail-carousel" class="splide" aria-label="サムネイルスライダー。各サムネイルをクリックすると、メインのスライダーが切り替わります">
      <div class="splide__track">
        <ul class="splide__list tab-list mb-[4%]">
          <li class="border border-[#999999] bg-white text-center hover:bg-[#CCCCCC]">
            <button class="slidethumbnail is-active w-full" data-slidenum="0">LP制作</button>
          </li>
          <li class="border border-[#999999] bg-white text-center hover:bg-[#CCCCCC]">
            <button class="slidethumbnail w-full" data-slidenum="1">商品ページ制作</button>
          </li>
          <li class="border border-[#999999] bg-white text-center hover:bg-[#CCCCCC]">
            <button class="slidethumbnail w-full" data-slidenum="2">バナー制作</button>
          </li>
          <li class="border border-[#999999] bg-white text-center hover:bg-[#CCCCCC]">
            <button class="slidethumbnail w-full" data-slidenum="3">ヒートマップを使ったLPO対策</button>
          </li>
          <li class="border border-[#999999] bg-white text-center hover:bg-[#CCCCCC]">
            <button class="slidethumbnail w-full" data-slidenum="4">デザイナー育成</button>
          </li>
        </ul>
      </div>
    </section>
    <section class="container max-w-screen-md">
      <div class="splide" aria-label="Splideの基本的なHTML">
        <div class="splide__track">
          <ul class="splide__list">
            <li class="splide__slide"><Image image="/src/assets/images/pc/slideLP.jpg" /></li>
            <li class="splide__slide"><Image image="/src/assets/images/pc/slideproduct.jpg" /></li>
            <li class="splide__slide"><Image image="/src/assets/images/pc/slidebanner.jpg" /></li>
            <li class="splide__slide"><Image image="/src/assets/images/pc/slideLPO.jpg" /></li>
            <li class="splide__slide"><Image image="/src/assets/images/pc/slideeducation.jpg" /></li>
          </ul>
        </div>
      </div>
    </section>
  </div>
  <div class="absolute left-[0] top-[75%] flex w-full justify-between md:top-[60%]">
    <button class="slideButton Prev block w-[12%] md:w-[6%]">
      <Image image="/src/assets/images/pc/slidebuttonprev.png" />
    </button>
    <button class="slideButton Next block w-[12%] md:w-[6%]">
      <Image image="/src/assets/images/pc/slidebuttonnext.png" />
    </button>
  </div>
</div>

<style>
  .splide__slide {
    @apply h-[40vh] bg-orange-200;
  }
  .tab-list {
    @apply grid grid-cols-2 grid-rows-2 gap-x-1 gap-y-1 md:grid-cols-3;
    & > li > button {
      @apply py-2 md:text-2xl;
    }
    & > li:nth-child(1) {
      @apply [grid-area:1/1/2/2];
    }
    & > li:nth-child(2) {
      @apply [grid-area:1/2/2/3];
    }
    & > li:nth-child(3) {
      @apply md:[grid-area:1/3/2/4];
    }
    & > li:nth-child(4) {
      @apply [grid-area:3/1/4/3] md:[grid-area:2/1/3/3];
    }
    & > li:nth-child(5) {
      @apply [grid-area:2/2/3/3] md:[grid-area:2/3/3/4];
    }
  }
</style>

<script>
  import Splide from "@splidejs/splide";
  const options = {
    type: "loop",
    perPage: 2,
    gap: "1rem",
    easing: "cubic-bezier(0.25, 1, 0.5, 1)",
    snap: true,
  };
  const splide = document.querySelectorAll(".splide");
  document.addEventListener("DOMContentLoaded", () => {
    splide.forEach((el: HTMLElement) => {
      new Splide(el, options).mount();
    });
  });
  const thumbnails = new Splide("#thumbnail", {
    fixedWidth: 100,
    fixedHeight: 60,
    type: "loop",
    focus: "center",
    gap: 10,
    arrows: false,
    pagination: false,
    isNavigation: true,
    breakpoints: {
      600: {
        fixedWidth: 60,
        fixedHeight: 44,
      },
    },
  });
</script>
